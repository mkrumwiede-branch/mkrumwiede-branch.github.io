<!DOCTYPE html>
<html>
    <head>
        <title>Matt Krumwiede Test Site</title>
        <link href='stylesheet.css' rel='stylesheet'>
        <script>
            window.dataLayer = window.dataLayer || [];
            window.dataLayer.push({
            'customerID': 'customer-id-guid'
            });
         </script>
         
        <!-- Google Tag Manager -->
        <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
        'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
        })(window,document,'script','dataLayer','GTM-TNTQFBD');</script>
        <!-- End Google Tag Manager -->
        <h1>Welcome to the test site</h1>
    </head>
    <body>
        <!-- Google Tag Manager (noscript) -->
        <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-TNTQFBD"
        height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
        <!-- End Google Tag Manager (noscript) -->
        <div class="eventContainer">
            <p>Push button for Custom Event</p>
            <button class="eventBtn" onclick="trackCustomEvent()">Custom Event</button>
        </div>

        <div class="eventContainer">
            <p>Push button for Complete Registration Event </p>
            <button class="eventBtn" onclick="trackRegistrationEvent()">Complete Registration</button>
        </div>

        <div class="eventContainer">
            <p>Push button for View Item Event </p>
            <button class="eventBtn" onclick="trackViewItemEvent()">View Item</button>
        </div>

        <div class="eventContainer">
            <p>Push button for Add to Cart Event</p>
            <button class="eventBtn" onclick="trackAddToCartEvent()">Add to cart</button>
        </div>

        <div class="eventContainer">
            <p>Push button for Purchase Completed Event </p>
            <button class="eventBtn" onclick="trackPurchaseCompletedEvent()">Purchase Completed</button>
        </div>

       
        <script>

            function trackCustomEvent(){
                branch.logEvent('custom_event', {'customerID': 'customer-id-guid',
                'event': 'playVideo',
                'videoId': 'vid-000-123',
                'videoFormat': 'hd'});
            }

            function trackRegistrationEvent(){
                var customer_event_data = {
                    'customerUserId': '6161654116431654',
                }
                var customer_alias = "registered for subscription";

                branch.logEvent('COMPLETE_REGISTRATION', customer_event_data, [], customer_alias);
            }

            function trackViewItemEvent(){
                var customer_event_data = {
                    'description': 'high value item view',
                    'customerType': 'logged-in user',
                };
                var contentItems = [
                    {
                        "$og_title": "Final Fantasy X",
                        "$og_description": "JRPG Video Game with turn based combat that explores fantasy world",
                        "$price": "59.99",
                    },
                    {
                        "$og_title": "Final Fantasy VII Remake",
                        "$og_description": "Highly acclaimed JRPG from the Final Fantasy series",
                        "$price": "59.99",
                    }
                ];
                var customer_alias = 'Viewed list of RPG games';

                branch.logEvent('VIEW_ITEMS', customer_event_data, contentItems, customer_alias);
            }

            function trackAddToCartEvent(){
                //need to change to add better data after seeing structure of returned data
                var customer_event_data = {
                    'description': 'repeated add to cart',
                    'customerType': 'new user',
                    'currency': 'USD',
                    'purchase_loc': 'online'

                };
                var contentItems = [
                    {
                        "$og_title": "Final Fantasy X",
                        "$og_description": "JRPG Video Game with turn based combat that explores fantasy world",
                        "$price": "59.99",
                        "$rating_average": 4.8,
                        "$product_brand": "Square Enix Games",
                        "$canonical_url": "https://mkrumwiede-branch.github.io/",

                    }
                ];
                var customer_alias = 'Added FFX to cart';

                branch.logEvent('ADD_TO_CART', customer_event_data, contentItems, customer_alias);
            }

            function trackPurchaseCompletedEvent(){
                //need to change to purchase completed event
                branch.logEvent('custom_event', {'customerID': 'customer-id-guid',
                'event': 'playVideo',
                'videoId': 'vid-000-123',
                'videoFormat': 'hd'});
            }
        </script>
    </body>
</html>

